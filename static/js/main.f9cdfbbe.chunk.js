(this["webpackJsonpreact-mentoring"]=this["webpackJsonpreact-mentoring"]||[]).push([[0],{41:function(e,t,n){},61:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),i=n(32),s=n.n(i),o=(n(41),n(13)),l=n.n(o),u=n(16),h=n(9),m=n(10),j=n(18),d=n(12),b=n(11),p=n(14),g=n.n(p),O=(n(61),n.p+"static/media/logo.720eeeb0.svg"),f=n.p+"static/media/settings.f3f15426.svg",v=n(7);var x=function(e){var t=e.isLoggedIn;return Object(a.jsx)("header",{className:"header",children:Object(a.jsxs)("div",{className:"header__wrapper",children:[Object(a.jsx)(v.b,{className:"header__logo",to:"/",children:Object(a.jsx)("img",{className:"header__logo-img",src:O,alt:"netflix"})}),Object(a.jsxs)("nav",{className:"header__nav",children:[Object(a.jsx)(v.b,{className:"header__link",to:"/settings",children:Object(a.jsx)("img",{className:"header__settings-img",src:f,alt:"settings"})}),"undefined"!==t&&Object(a.jsx)(v.b,{className:"header__link",to:t?"/logout":"/login",children:t?"Log out":"Log In"})]})]})})},y=(n(67),n(68),n(2)),_=n(35);function w(e){var t=e.width,n=e.height,c=e.source;return Object(a.jsx)("iframe",{title:"top-film-title",width:t,height:n,src:"https://www.youtube.com/embed/".concat(c,"?autoplay=1&mute=1")})}n(69);var N=function(e){var t=e.film,n=t.id,c=t.name,r=t.description,i=t.source;return Object(a.jsxs)("section",{className:"main-film-section",children:[Object(a.jsxs)("div",{className:"main-film-section__video-info",children:[Object(a.jsx)("h3",{children:c}),Object(a.jsx)("h5",{children:r}),Object(a.jsx)(v.b,{to:"/view-mode/".concat(n),children:Object(a.jsx)("button",{children:"Watch"})})]}),Object(a.jsx)("div",{className:"main-film-section__video",children:Object(a.jsx)(w,{width:"500px",height:"250px",source:i})})]})};n(70);function k(e){var t=e.picture;return Object(a.jsxs)(v.b,{to:"/view-mode/".concat(t.id),className:"picture-card",style:{backgroundImage:'url("'.concat(t.photoSource,'")')},children:[Object(a.jsx)("h3",{className:"picture-card__name",children:t.name}),Object(a.jsx)("h6",{className:"picture-card__description",children:t.description})]})}n(71);function I(e){var t=e.categories;return Object(a.jsx)("section",{className:"categories-section",children:t.map((function(e){return Object(a.jsxs)("div",{className:"categories-section_section",children:[Object(a.jsx)("h3",{children:e.name}),Object(a.jsx)("div",{className:"categories-section__cards",children:e.items.map((function(e){return Object(a.jsx)(k,{picture:e},e.name)}))})]},e.name)}))})}n(72);var S="https://my-json-server.typicode.com/Chizhevsky/my-fake-server-for-films",C={primary:{color:"black"},secondary:{color:"grey"}},A="primary",L=r.a.createContext({them:A,themes:C,changeTheme:function(){}}),z=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={topFilm:null,categories:null},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,c,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.a.get("".concat(S,"/top-film")),n=g.a.get("".concat(S,"/categories")),e.next=4,g.a.all([t,n]);case 4:a=e.sent,c=Object(_.a)(a,2),r=c[0].data,i=c[1].data,this.setState({topFilm:r,categories:i});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(a.jsx)(L.Consumer,{children:function(t){var n,c=t.theme,r=t.themes[c].color;return Object(a.jsxs)("main",{className:"home-page-main",style:{color:r},children:[e.state.topFilm&&Object(a.jsx)(N,{film:e.state.topFilm}),(null===(n=e.state.categories)||void 0===n?void 0:n.length)>0&&Object(a.jsx)(I,{categories:e.state.categories})]})}})}}]),n}(r.a.Component),P=n(34),T=(n(73),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleInputChange=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(P.a)({},a,c))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,a=n.email,c=n.password;e.props.handleAutorization(a,c)},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("main",{className:"login",children:[Object(a.jsx)("h3",{children:"Login"}),Object(a.jsxs)("form",{className:"login__form",onSubmit:this.handleSubmit,children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("h4",{children:"Email:"}),Object(a.jsx)("input",{name:"email",type:"email",value:this.state.email,onChange:this.handleInputChange})]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("h4",{children:"Password"}),Object(a.jsx)("input",{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})]}),Object(a.jsx)("input",{className:"login__submit",type:"submit",value:"LogIn"})]})]})}}]),n}(r.a.Component)),D=(n(74),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={theme:e.props.theme},e.handleSubmit=function(t){t.preventDefault(),e.props.changeTheme(e.state.theme)},e.handleChange=function(t){e.setState({theme:t.target.value})},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("main",{className:"settings",children:[Object(a.jsx)("h3",{children:"Settings"}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsxs)("label",{className:"settings__form-label",children:[Object(a.jsx)("h4",{children:"Choose theme:"}),Object(a.jsxs)("select",{className:"settings__input",name:"theme",value:this.state.theme,onChange:this.handleChange,children:[Object(a.jsx)("option",{value:"primary",children:"primary"}),Object(a.jsx)("option",{value:"secondary",children:"secondary"})]})]}),Object(a.jsx)("input",{type:"submit",value:"Save"})]})]})}}]),n}(r.a.Component)),F=(n(75),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={currentPicture:null},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,c,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null===(t=this.props.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)){e.next=8;break}return e.next=4,g.a.get("".concat(S,"/allPictures"));case 4:c=e.sent,r=c.data,(i=r.find((function(e){return e.id===a})))&&this.setState({currentPicture:i});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.currentPicture;return t&&Object(a.jsxs)("main",{className:"view-mode",children:[Object(a.jsx)("button",{className:"view-mode__back-button",onClick:function(){return e.props.history.goBack()},children:"< Back"}),Object(a.jsx)("div",{className:"view-mode__video-player",children:Object(a.jsx)(w,{width:"1000px",height:"500px",source:t.source})}),Object(a.jsx)("h1",{children:t.name}),Object(a.jsx)("p",{children:t.description})]})}}]),n}(c.Component)),B=r.a.createContext({isLoggedIn:!1,email:null,handleAutorization:function(){}});var E=function(){return Object(a.jsxs)(y.c,{children:[Object(a.jsx)(y.a,{path:"/settings",render:function(){return Object(a.jsx)(L.Consumer,{children:function(e){var t=e.theme,n=e.changeTheme;return Object(a.jsx)(D,{theme:t,changeTheme:n})}})}}),Object(a.jsx)(y.a,{path:"/login",render:function(){return Object(a.jsx)(B.Consumer,{children:function(e){var t=e.handleAutorization;return Object(a.jsx)(T,{handleAutorization:t})}})}}),Object(a.jsx)(y.a,{path:"/view-mode/:id",component:F}),Object(a.jsx)(y.a,{exact:!0,path:"/",component:z})]})},J=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(e){var a;Object(h.a)(this,n),(a=t.call(this,e)).changeTheme=function(e){localStorage.setItem("theme",e),a.setState({theme:e})};var c=localStorage.getItem("theme")||A,r="true"===localStorage.getItem("isLoggedIn"),i=localStorage.getItem("email")||null;return a.state={auth:{isLoggedIn:r,email:i},theme:c},a.handleAutorization=a.handleAutorization.bind(Object(j.a)(a)),a}return Object(m.a)(n,[{key:"handleAutorization",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,c,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(S,"/users"));case 2:return a=e.sent,c=a.data,e.next=6,c.find((function(e){return e.email===t&&e.password===n}));case 6:e.sent?(localStorage.setItem("isLoggedIn","true"),localStorage.setItem("email",t),this.setState({auth:{isLoggedIn:!0,email:t}},(function(){return r.props.history.push("/")}))):this.setState({});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.theme,n=e.auth,c=n.isLoggedIn,r=n.email;return Object(a.jsx)(L.Provider,{value:{theme:t,changeTheme:this.changeTheme,themes:C},children:Object(a.jsx)(B.Provider,{value:{isLoggedIn:c,email:r,handleAutorization:this.handleAutorization},children:Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(x,{isLoggedIn:c,email:r}),Object(a.jsx)(E,{})]})})})}}]),n}(r.a.Component),M=Object(y.f)(J);s.a.render(Object(a.jsx)(v.a,{basename:"/react-mentoring",children:Object(a.jsx)(M,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.f9cdfbbe.chunk.js.map